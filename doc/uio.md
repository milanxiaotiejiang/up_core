## uio 相关

### 概述

UIO 是一个用 Python 编写的命令行串口通信工具，提供了简单易用的接口来与各种串口设备进行通信。该工具支持多种串口配置参数，并提供持续收发模式，方便进行串口调试和测试。

### 功能特点

- 查看系统中所有可用的串口设备
- 灵活配置串口参数（波特率、奇偶校验、数据位、停止位等）
- 支持十六进制格式发送和接收数据
- 实时显示接收到的数据
- 持续收发模式便于调试

### 安装要求

- Python 3.6+
- `up_core` 库（用于串口通信）

### 基本使用方法

#### 列出可用串口设备

```shell
uio -l
```

这将显示当前系统中所有可用的串口设备及其详细信息。

#### 连接串口并进入持续收发模式

```shell
uio COM1 -r
```

这将连接到串口设备 `COM1`（在 Windows 上）或 `/dev/ttyUSB0`（在 Linux 上），并进入持续收发模式。

#### 完整的命令行选项

```shell
uio [设备] [选项]
```

参数说明：

- `[设备]`：要连接的串口设备路径（如 `/dev/ttyUSB0`, `COM1`）

选项：

- `-b, --baudrate`：设置波特率（默认: 9600）
- `-p, --parity`：设置奇偶校验模式（默认: none），可选值：none, odd, even, mark, space
- `-d, --databits`：设置数据位长度（默认: 8），可选值：5, 6, 7, 8
- `-s, --stopbits`：设置停止位（默认: 1），可选值：1, 1.5, 2
- `-f, --flowcontrol`：设置流控制模式（默认: none），可选值：none, software, hardware
- `-t, --timeout`：设置超时时间（单位: 秒）
- `-l, --list`：列出当前系统中所有可用的串口设备
- `-r, --raw`：进入持续收发模式
- `-v, --version`：显示版本信息

### 持续收发模式使用说明

在持续收发模式下：

1. 程序会自动启动一个后台线程来监听并显示从串口接收到的所有数据。
2. 用户可以在命令行中输入十六进制数据进行发送。
3. 输入的格式应为十六进制字符串，如 "FF 01 02 03"。
4. 按 `Ctrl+C` 可以退出持续收发模式并关闭串口。

### 示例

#### 以 9600 波特率连接 COM1 并进入持续收发模式

```shell
uio COM1 -b 9600 -r
```

#### 以 115200 波特率、偶校验连接 `/dev/ttyUSB0`

```shell
uio /dev/ttyUSB0 -b 115200 -p even -r
```

#### 自定义所有参数

```shell
uio COM3 -b 38400 -p odd -d 7 -s 1.5 -f hardware -t 2.0 -r
```

### 错误处理

- 如果指定的串口设备不存在或无法访问，程序会显示错误信息并退出。
- 在持续收发模式下，如果输入的十六进制字符串格式不正确，会提示 "无效的十六进制输入" 并要求重新输入。
- 如果串口在通信过程中被关闭或发生错误，程序会捕获异常并给出相应提示。

### 注意事项

- 在 Windows 系统中，串口设备名称通常为 `COM1`、`COM2` 等。
- 在 Linux/Mac 系统中，串口设备名称通常位于 `/dev` 目录下，如 `/dev/ttyUSB0`、`/dev/ttyS0` 等。
- 确保当前用户对指定的串口设备有访问权限。
- 连接设备前，确保波特率等参数与设备要求相匹配。
