## uio_s 相关

`uio_s` 是一个命令行工具，旨在帮助用户搜索串口设备中的舵机。它允许用户通过不同波特率连接设备并搜索舵机，并实时输出搜索过程中的数据。

### **命令行使用**

#### **基本命令格式**

```bash
uio_s --search <device> -bs <baudrates>
```

#### **命令行参数说明**

| 参数                    | 描述                                          |
|-----------------------|---------------------------------------------|
| `--search`            | 启动搜索模式，搜索指定设备上的舵机                           |
| `--device` `<device>` | 要连接的串口设备，如 `/dev/ttyUSB0` 或 `COM1`          |
| `-bs` `<baudrates>`   | 设置波特率，支持多个波特率，用逗号分隔。例如: `9600,19200,115200` |
| `-v`, `--version`     | 显示版本信息                                      |
| `-h`, `--help`        | 显示帮助信息，列出所有命令行参数                            |

#### **示例命令**

1. **在指定设备上启动搜索**:

   ```bash
   uio_s --search /dev/ttyUSB0 -bs 9600,19200,115200 --timeout 2000 --verify
   ```

   启动后，该命令会开始在设备 `/dev/ttyUSB0` 上搜索舵机，使用波特率 `9600`, `19200`, 和 `115200`。

2. **显示版本信息**:

   ```bash
   uio_s -v
   ```

   该命令会显示当前工具的版本信息。

3. **获取帮助**:

   ```bash
   uio_s --help
   ```

   显示所有可用命令和参数的帮助信息。

### **工具工作流程**

1. **启动搜索**：
    - 启动命令后，程序会尝试连接到指定的设备（如 `/dev/ttyUSB0`）。
    - 通过提供的波特率（多个波特率通过逗号分隔），工具将搜索指定设备上的舵机。

2. **实时数据**：
    - 在搜索过程中，程序将持续输出舵机的波特率、ID 和错误码。数据将通过 ZeroMQ 发布到订阅者（例如，JavaScript 客户端）进行实时处理。

3. **中断操作**：
    - 通过按下 `Ctrl+C`，用户可以中断当前搜索操作。中断后，程序会优雅地停止正在进行的搜索，并退出。

4. **ZeroMQ 消息发布**：
    - 程序在搜索过程中会通过 ZeroMQ 将搜索到的舵机信息（波特率、ID、错误码）实时发布。订阅者可以通过 ZeroMQ 接收这些数据。

### **开发说明**

- `ServoManager` 类是工具的核心，负责与硬件设备通信并进行舵机搜索。
- 在 `search()` 方法中，工具启动了一个搜索过程并通过回调函数将搜索结果推送到队列中。然后，数据通过 ZeroMQ 发布出去。
- 信号处理中断功能（`Ctrl+C`）确保程序能够优雅地停止舵机搜索操作。

### **注意事项**

- 在执行 `--search` 时，确保设备正确连接并且设备路径（如 `/dev/ttyUSB0`）有效。
- 工具支持多个波特率，并且这些波特率需要通过逗号分隔传递。例如：`9600,19200,115200`。
- ZeroMQ 是用于实时传输数据的消息队列。如果需要获取搜索结果并在其他应用中处理，确保有合适的 ZeroMQ 客户端进行订阅。

### **常见问题**

1. **如何停止正在进行的搜索？**
    - 使用 `Ctrl+C` 来中断搜索操作。

2. **如何获取实时数据？**
    - 使用 ZeroMQ 客户端订阅端口 `tcp://localhost:5555`，接收数据。

3. **如何处理其他波特率的设备？**
    - 使用 `-bs` 参数指定所需的波特率。例如：`-bs 9600,19200,115200`。